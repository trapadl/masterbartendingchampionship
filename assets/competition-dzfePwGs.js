const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/countdown-DbY42gfx.js","assets/countdown-DmaKE9B1.css"])))=>i.map(i=>d[i]);
import{s as D,i as A,b as M,_ as U}from"./countdown-DbY42gfx.js";async function P(){const{data:x,error:E}=await D.from("legacy_competitions").select("id, name, date, venue, category, more_info_link").eq("status","upcoming").order("date",{ascending:!0});if(E){console.error("Error fetching upcoming competitions:",E);return}const C=document.getElementById("upcoming-competitions-body");C.innerHTML="",x.forEach(o=>{const i=document.createElement("tr"),a=document.createElement("td");a.textContent=new Date(o.date).toLocaleDateString(),i.appendChild(a);const d=document.createElement("td");d.textContent=o.name,i.appendChild(d);const n=document.createElement("td"),e=document.createElement("span");e.classList.add("category-badge"),o.category==="speed"?(e.classList.add("category-speed"),e.textContent="Speed"):o.category==="flair"?(e.classList.add("category-flair"),e.textContent="Flair"):o.category==="traditional"||o.category==="legacy"?(e.classList.add("category-traditional"),e.textContent="Traditional"):e.textContent=o.category,n.appendChild(e),i.appendChild(n);const t=document.createElement("td");t.textContent=o.venue,i.appendChild(t);const p=document.createElement("td");if(o.more_info_link){const c=document.createElement("a");c.href=o.more_info_link,c.target="_blank",c.rel="noopener noreferrer",c.textContent="see more",p.appendChild(c)}else p.textContent="N/A";i.appendChild(p),C.appendChild(i)})}async function N(){let{data:x,error:E}=await D.from("legacy_competitions").select(`
            id,
            name,
            date,
            venue,
            category,
            status,
            legacy_results (
              placement,
              post_competition_rating,
              pre_competition_rating,
              bartender:bartenders ( full_name )
            )
          `).eq("status","approved").order("date",{ascending:!1});if(E){console.error("Error fetching past competitions:",E);return}const C=document.getElementById("past-competitions-body");C.innerHTML="",x.forEach(o=>{const i=document.createElement("tr"),a=document.createElement("td");a.textContent=new Date(o.date).toLocaleDateString(),i.appendChild(a);const d=document.createElement("td");d.textContent=o.name,i.appendChild(d);const n=document.createElement("td"),e=document.createElement("span");e.classList.add("category-badge"),o.category==="speed"?(e.classList.add("category-speed"),e.textContent="Speed"):o.category==="flair"?(e.classList.add("category-flair"),e.textContent="Flair"):o.category==="traditional"||o.category==="legacy"?(e.classList.add("category-traditional"),e.textContent="Traditional"):e.textContent=o.category,n.appendChild(e),i.appendChild(n);const t=document.createElement("td");t.textContent=o.venue,i.appendChild(t);const p=document.createElement("td"),c=document.createElement("button");c.textContent="▼",c.style.cursor="pointer",p.appendChild(c),i.appendChild(p);const g=document.createElement("tr");g.classList.add("hidden");const y=document.createElement("td");y.colSpan=5;const m=document.createElement("table");m.style.width="100%",m.style.marginTop="0.5rem";const l=document.createElement("thead");l.innerHTML=`
            <tr>
              <th style="width: 10%">Placement</th>
              <th style="width: 40%">Bartender</th>
              <th style="width: 25%">Rating After</th>
              <th style="width: 25%">Change</th>
            </tr>
          `,m.appendChild(l);const f=document.createElement("tbody");if(o.legacy_results&&o.legacy_results.length>0)o.legacy_results.forEach(u=>{var v;const r=document.createElement("tr"),L=document.createElement("td");L.textContent=u.placement,r.appendChild(L);const T=document.createElement("td");T.textContent=((v=u.bartender)==null?void 0:v.full_name)||"Unknown Bartender",r.appendChild(T);const h=document.createElement("td"),s=u.post_competition_rating??"?";h.textContent=s.toFixed?s.toFixed(1):s,r.appendChild(h);const w=document.createElement("td"),k=u.pre_competition_rating??s,_=s-k,b=_>=0?"+":"";w.textContent=`${b}${_.toFixed?_.toFixed(1):_}`,r.appendChild(w),f.appendChild(r)});else{const u=document.createElement("tr"),r=document.createElement("td");r.colSpan=4,r.textContent="No results found.",u.appendChild(r),f.appendChild(u)}m.appendChild(f),y.appendChild(m),g.appendChild(y),c.addEventListener("click",()=>{g.classList.toggle("hidden")}),C.appendChild(i),C.appendChild(g)})}document.addEventListener("DOMContentLoaded",async()=>{await P(),await N()});document.addEventListener("DOMContentLoaded",()=>{A(),M()});document.addEventListener("DOMContentLoaded",async function(){const{supabase:x,supabaseUtils:E}=await U(async()=>{const{supabase:a,supabaseUtils:d}=await import("./countdown-DbY42gfx.js").then(n=>n.e);return{supabase:a,supabaseUtils:d}},__vite__mapDeps([0,1]));await E.ensureInitialized();function C(a){const d=(a||"legacy").trim().toLowerCase(),n=document.createElement("span");return n.classList.add("category-badge"),d==="speed"?(n.classList.add("category-speed"),n.textContent="Speed"):d==="flair"?(n.classList.add("category-flair"),n.textContent="Flair"):d==="traditional"||d==="legacy"?(n.classList.add("category-traditional"),n.textContent="Traditional"):n.textContent=a||"Unknown",n}async function o(){console.log("Loading upcoming competitions...");try{const{data:a,error:d}=await x.from("legacy_competitions").select("id, name, date, venue, category, more_info_link").eq("status","upcoming").order("date",{ascending:!0});if(d)throw d;console.log("Upcoming competitions fetched:",a);const n=document.getElementById("upcoming-competitions-body");if(!n){console.error("Upcoming competitions tbody not found");return}if(n.innerHTML="",a&&a.length>0)a.forEach(e=>{const t=document.createElement("tr"),p=document.createElement("td");p.textContent=new Date(e.date).toLocaleDateString(),t.appendChild(p);const c=document.createElement("td");c.textContent=e.name,t.appendChild(c);const g=document.createElement("td");g.appendChild(C(e.category)),t.appendChild(g);const y=document.createElement("td");y.textContent=e.venue,t.appendChild(y);const m=document.createElement("td");if(e.more_info_link){const l=document.createElement("a");l.href=e.more_info_link,l.target="_blank",l.rel="noopener noreferrer",l.textContent="see more",m.appendChild(l)}else m.textContent="N/A";t.appendChild(m),n.appendChild(t)});else{const e=document.createElement("tr"),t=document.createElement("td");t.colSpan=5,t.textContent="No upcoming competitions found",t.style.textAlign="center",e.appendChild(t),n.appendChild(e)}}catch(a){console.error("Error loading upcoming competitions:",a)}}async function i(){console.log("Loading past competitions...");try{const{data:a,error:d}=await x.from("legacy_competitions").select(`
          id,
          name,
          date,
          venue,
          category,
          status,
          legacy_results (
            placement,
            post_competition_rating,
            pre_competition_rating,
            bartender:bartenders ( full_name )
          )
        `).eq("status","approved").order("date",{ascending:!1});if(d)throw d;console.log("Past competitions fetched:",a);const n=document.getElementById("past-competitions-body");if(!n){console.error("Past competitions tbody not found");return}if(n.innerHTML="",a&&a.length>0)a.forEach(e=>{const t=document.createElement("tr"),p=document.createElement("td");p.textContent=new Date(e.date).toLocaleDateString(),t.appendChild(p);const c=document.createElement("td");c.textContent=e.name,t.appendChild(c);const g=document.createElement("td");g.appendChild(C(e.category)),t.appendChild(g);const y=document.createElement("td");y.textContent=e.venue,t.appendChild(y);const m=document.createElement("td"),l=document.createElement("button");l.textContent="▼",l.style.cursor="pointer",m.appendChild(l),t.appendChild(m);const f=document.createElement("tr");f.classList.add("hidden");const u=document.createElement("td");u.colSpan=5;const r=document.createElement("table");r.style.width="100%",r.style.marginTop="0.5rem";const L=document.createElement("thead");L.innerHTML=`
            <tr>
              <th style="width: 10%">Placement</th>
              <th style="width: 40%">Bartender</th>
              <th style="width: 25%">Rating After</th>
              <th style="width: 25%">Change</th>
            </tr>
          `,r.appendChild(L);const T=document.createElement("tbody");if(e.legacy_results&&e.legacy_results.length>0)e.legacy_results.forEach(h=>{var S;const s=document.createElement("tr"),w=document.createElement("td");w.textContent=h.placement,s.appendChild(w);const k=document.createElement("td");k.textContent=((S=h.bartender)==null?void 0:S.full_name)||"Unknown Bartender",s.appendChild(k);const _=document.createElement("td"),b=h.post_competition_rating??"?";_.textContent=b.toFixed?b.toFixed(1):b,s.appendChild(_);const v=document.createElement("td"),B=h.pre_competition_rating??b,R=b-B,F=R>=0?"+":"";v.textContent=`${F}${R.toFixed?R.toFixed(1):R}`,s.appendChild(v),T.appendChild(s)});else{const h=document.createElement("tr"),s=document.createElement("td");s.colSpan=4,s.textContent="No results found.",h.appendChild(s),T.appendChild(h)}r.appendChild(T),u.appendChild(r),f.appendChild(u),l.addEventListener("click",()=>{f.classList.toggle("hidden")}),n.appendChild(t),n.appendChild(f)});else{const e=document.createElement("tr"),t=document.createElement("td");t.colSpan=5,t.textContent="No past competitions found",t.style.textAlign="center",e.appendChild(t),n.appendChild(e)}}catch(a){console.error("Error loading past competitions:",a)}}await o(),await i()});
