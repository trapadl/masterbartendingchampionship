import{s as S,l as te,j as e,r as o,c as A,u as J,a as K,b as Z,d as re,e as ae}from"./main-BvTxE4Sc.js";import{O as se,c as ie,s as H}from"./toast-BfBNPEk_.js";import{E as ne}from"./EventCarousel-zC09k1kg.js";class oe{async fetchLeaderboardData(){try{const{data:b,error:h}=await S.from("legacy_results").select(`
          id,
          legacy_competition_id,
          bartender_id,
          placement,
          points,
          status,
          competition_category,
          legacy_competitions (
            id,
            name,
            date,
            category
          )
        `).eq("status","approved");if(h)throw h;const{data:w,error:x}=await S.from("bartenders").select(`
          id, 
          full_name,
          rating,
          rating_rd,
          rating_volatility,
          ranking,
          speed_rating,
          speed_rd,
          speed_volatility,
          speed_ranking,
          traditional_rating,
          traditional_rd,
          traditional_volatility,
          traditional_ranking,
          flair_rating,
          flair_rd,
          flair_volatility,
          flair_ranking
        `).eq("is_approved",!0).not("is_archived","eq",!0);if(x)throw x;const s={legacy:new Set,speed:new Set,traditional:new Set,flair:new Set};return b.forEach(t=>{var v;if(!t.bartender_id)return;let d=t.competition_category||"legacy";!t.competition_category&&((v=t.legacy_competitions)!=null&&v.category)&&(d=t.legacy_competitions.category),s[d]?s[d].add(t.bartender_id):s.legacy.add(t.bartender_id)}),{legacy:w.filter(t=>s.legacy.has(t.id)&&t.rating!=null).sort((t,d)=>(d.rating||0)-(t.rating||0)).map(t=>({id:t.id,name:t.full_name,rating:t.rating,rating_rd:t.rating_rd,points:Math.round(t.rating||0),img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="7" r="4"/><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/></svg>'})),speed:w.filter(t=>s.speed.has(t.id)&&t.speed_rating!=null).sort((t,d)=>(d.speed_rating||0)-(t.speed_rating||0)).map(t=>({id:t.id,name:t.full_name,rating:t.speed_rating,rating_rd:t.speed_rd,points:Math.round(t.speed_rating||0),img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="7" r="4"/><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/></svg>'})),traditional:w.filter(t=>s.traditional.has(t.id)&&t.traditional_rating!=null).sort((t,d)=>(d.traditional_rating||0)-(t.traditional_rating||0)).map(t=>({id:t.id,name:t.full_name,rating:t.traditional_rating,rating_rd:t.traditional_rd,points:Math.round(t.traditional_rating||0),img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="7" r="4"/><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/></svg>'})),flair:w.filter(t=>s.flair.has(t.id)&&t.flair_rating!=null).sort((t,d)=>(d.flair_rating||0)-(t.flair_rating||0)).map(t=>({id:t.id,name:t.full_name,rating:t.flair_rating,rating_rd:t.flair_rd,points:Math.round(t.flair_rating||0),img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="7" r="4"/><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/></svg>'}))}}catch(b){return te(b),{legacy:[],traditional:[],flair:[],speed:[]}}}}const le=new oe,ce=e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-gray-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"7",r:"4"}),e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"})]}),U=10;function de({data:m=[],type:b="legacy",filter:h="rating",currentPage:w=0,onPageChange:x,searchActive:s=!1,onHistoryClick:t=()=>{}}){const d=c=>Math.round(c.rating||0),v="Rating",y=s?0:w*U,r=s?m.slice(0,Math.min(50,m.length)):m.slice(y,y+U),a=s?1:Math.ceil(m.length/U),n=w<a-1,p=w>0,_=c=>c%2===0?"bg-zinc-850":"bg-zinc-800";return e.jsxs("div",{className:"overflow-x-auto rounded-lg shadow",children:[e.jsxs("table",{className:"leaderboard-table min-w-full divide-y divide-gray-700",children:[e.jsx("thead",{className:"bg-zinc-700",children:e.jsx("tr",{children:["Rank","Profile","Name",v].map(c=>e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:c},c))})}),e.jsxs("tbody",{className:"divide-y divide-gray-700",children:[r.map((c,i)=>e.jsxs("tr",{className:`${_(i)} hover:bg-zinc-700 cursor-pointer`,onClick:()=>t(c),children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:s?i+1:y+i+1}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"profile-pic h-10 w-10 bg-zinc-600 rounded-full flex items-center justify-center border border-gray-500 hover:border-white transition-colors",onClick:u=>{u.stopPropagation(),t(c)},title:`History for ${c.name}`,children:ce})}),e.jsx("td",{className:"px-4 py-3 text-sm text-white",children:c.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-white font-medium",children:d(c)})]},c.id||i)),!s&&(n||p)&&e.jsx("tr",{className:"pagination-row bg-zinc-800",children:e.jsx("td",{colSpan:"4",className:"text-center py-3 px-4 border-t border-gray-700",children:e.jsxs("div",{className:"pagination-controls flex justify-center gap-3",children:[p&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"pagination-button",onClick:()=>x(0),children:"Top 10"}),e.jsx("button",{className:"pagination-button",onClick:()=>x(w-1),children:"Previous 10"})]}),n&&e.jsx("button",{className:"pagination-button",onClick:()=>x(w+1),children:"Next 10"})]})})}),s&&m.length>50&&e.jsx("tr",{className:"bg-zinc-800",children:e.jsx("td",{colSpan:"4",className:"text-center py-3 px-4 text-gray-400 border-t border-gray-700",children:"Showing top 50 results. Please refine your search."})})]})]}),m.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-400 italic",children:s?"No bartenders match your search.":"No competitors found yet."}),!s&&m.length>0&&r.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-400 italic",children:"No more results on this page."})]})}const Y=({isOpen:m,onClose:b,title:h,children:w,maxWidth:x="max-w-xl"})=>{if(o.useEffect(()=>{const t=d=>{d.key==="Escape"&&b()};return m?(document.addEventListener("keydown",t),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("keydown",t),document.body.style.overflow=""}},[m,b]),!m)return null;const s=t=>{t.target===t.currentTarget&&b()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4 transition-opacity duration-300 ease-in-out",onClick:s,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:e.jsxs("div",{className:`bg-zinc-800 rounded-lg shadow-xl w-full ${x} max-h-[90vh] overflow-hidden flex flex-col`,children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-700 flex-shrink-0",children:[e.jsx("h2",{id:"modal-title",className:"text-xl font-semibold text-white",children:h||"Modal"}),e.jsx("button",{type:"button",onClick:b,className:"text-gray-400 hover:text-white text-2xl leading-none font-bold focus:outline-none p-1","aria-label":"Close modal",children:"×"})]}),e.jsx("div",{className:"p-6 overflow-y-auto flex-grow",children:w})]})})},G=A("CompetitionHistoryModalContent"),me=({bartenderId:m,bartenderName:b})=>{const[h,w]=o.useState([]),[x,s]=o.useState(!0),[t,d]=o.useState(null);o.useEffect(()=>{(async()=>{if(!m){s(!1),d("Bartender ID is missing.");return}s(!0),d(null),G.debug(`Fetching history for bartender ID: ${m}`);try{const{data:r,error:a}=await S.from("legacy_results").select(`placement,
             post_competition_rating,
             pre_competition_rating,
             legacy_competition_id,
             legacy_competitions (
               id,
               name,
               date
             )`).eq("bartender_id",m).order("date",{ascending:!1,foreignTable:"legacy_competitions"});if(a)throw a;G.debug("Fetched competition history",{bartenderId:m,resultCount:r==null?void 0:r.length}),w(r||[])}catch(r){G.error("Error fetching competition history:",{bartenderId:m,error:r}),d(`Failed to load competition history: ${r.message}. Please try again.`)}finally{s(!1)}})()},[m]);const v=(y,r)=>y==null||r==null?"?":Math.round(r-y);return e.jsx("div",{className:"competition-history-content max-h-[70vh] overflow-y-auto pr-2",children:x?e.jsxs("div",{className:"flex justify-center items-center p-8",children:[e.jsx("div",{className:"animate-spin h-6 w-6 border-4 border-white rounded-full border-t-transparent"}),e.jsx("span",{className:"ml-3 text-gray-300",children:"Loading history..."})]}):t?e.jsx("div",{className:"text-red-400 p-4 text-center bg-black/50 rounded border border-red-500",children:t}):h.length===0?e.jsxs("div",{className:"text-gray-400 p-6 text-center italic",children:["No competition history found for ",b,"."]}):e.jsxs("table",{className:"competition-history-table min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Competition"}),e.jsx("th",{className:"text-center",children:"Placement"}),e.jsx("th",{className:"text-center",children:"Rating Change"})]})}),e.jsx("tbody",{children:h.map((y,r)=>{var c,i,u;const a=v(y.pre_competition_rating,y.post_competition_rating),n=(c=y.legacy_competitions)!=null&&c.date?new Date(y.legacy_competitions.date).toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"numeric"}):"Unknown Date",p=a==="?"?"text-gray-400":a>0?"text-white":"text-gray-400",_=(i=y.legacy_competitions)!=null&&i.id?`${y.legacy_competitions.id}-${r}`:r;return e.jsxs("tr",{className:"even:bg-zinc-800 odd:bg-gradient-to-b from-zinc-800 to-zinc-900",children:[e.jsx("td",{className:"text-sm text-gray-300 whitespace-nowrap",children:n}),e.jsx("td",{className:"text-sm text-white",children:((u=y.legacy_competitions)==null?void 0:u.name)||"Unknown Competition"}),e.jsx("td",{className:"text-sm text-center text-gray-300",children:y.placement||"N/A"}),e.jsx("td",{className:`text-sm text-center font-medium ${p}`,children:a>=0?`+${a}`:a})]},_)})})]})})};function I({id:m,title:b,type:h,data:w=[],page:x,filter:s,onPageChange:t,onFilterChange:d,showFilters:v=!1,showClaimButton:y=!1,hasPendingClaim:r=!1,comingSoon:a=!1,onClaimProfileClick:n,onSubmitResultClick:p}){const[_,c]=o.useState(""),[i,u]=o.useState(!1),[g,N]=o.useState(null),E=_.trim()?w.filter(k=>k.name.toLowerCase().includes(_.toLowerCase())):w,T=10,R=x*T,B=E.slice(R,R+T),O=k=>{N(k),u(!0)},l=()=>{N(null),u(!1)},j=k=>{c(k.target.value),x!==0&&t(h,0)},P=()=>c(""),z="px-4 py-2 rounded border transition-colors duration-200",f=`${z} bg-white text-black border-white hover:bg-zinc-200 hover:border-gray-200`,C=`${z} bg-transparent text-white border-gray-500 hover:bg-zinc-700`,L=`${z} bg-white text-black border-white`;return e.jsxs("div",{id:m,className:`leaderboard-container ${a?"coming-soon":""} mb-12`,children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:b}),!a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"search-container mb-4",children:[e.jsxs("div",{className:"relative w-full sm:w-1/4",children:[e.jsx("input",{type:"text",placeholder:"// search...",value:_,onChange:j,className:"w-full p-2 pl-10 bg-zinc-700 text-white rounded border border-gray-600 focus:border-gray-500 focus:outline-none"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:`M8 4a4 4 0 100 8 4 4 0 000-8zM2 \r
                       8a6 6 0 1110.89 3.476l4.817\r
                       4.817a1 1 0 01-1.414 \r
                       1.414l-4.816-4.816A6 6 0 012 8z`,clipRule:"evenodd"})})}),_&&e.jsx("button",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-white",onClick:P,children:e.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:`M10 18a8 8 0 100-16 8 8 0 000 \r
                         16zM8.707 7.293a1 1 0 00-1.414 \r
                         1.414L8.586 10l-1.293 1.293a1 1 \r
                         0 101.414 1.414L10 11.414l1.293 \r
                         1.293a1 1 0 001.414-1.414L11.414 \r
                         10l1.293-1.293a1 1 0 00-1.414-1.414L10 \r
                         8.586 8.707 7.293z`,clipRule:"evenodd"})})})]}),_&&E.length===0?e.jsxs("p",{className:"text-gray-400 text-sm mt-2",children:["No results for “",_,"”"]}):_?e.jsxs("p",{className:"text-gray-400 text-sm mt-2",children:["Found ",E.length," ",E.length===1?"result":"results"]}):null]}),e.jsxs("div",{className:"button-container flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[v&&e.jsx("div",{className:"filter-buttons flex gap-2",children:e.jsx("button",{className:s==="rating"?L:C,onClick:()=>d(h,"rating"),children:"Rating"})}),h==="legacy"&&e.jsxs("div",{className:"action-buttons flex gap-2",children:[y&&n&&(r?e.jsx("button",{className:`${f} bg-zinc-600 text-gray-400 border-gray-600 cursor-not-allowed opacity-70`,disabled:!0,children:"Claim Pending"}):e.jsx("button",{className:f,onClick:n,children:"Claim Profile"})),p&&e.jsx("button",{className:f,onClick:p,children:"Submit Result"})]})]})]}),e.jsxs("div",{className:"leaderboard-content",children:[e.jsx(de,{data:E,type:h,filter:s,currentPage:x,onPageChange:k=>t(h,k),searchActive:!!_.trim(),onHistoryClick:O}),e.jsxs("div",{className:"record-cards",children:[B.map((k,F)=>e.jsxs("div",{className:"record-card",onClick:()=>O(k),role:"button",tabIndex:0,onKeyPress:q=>q.key==="Enter"&&O(k),children:[e.jsx("div",{className:"rank",children:R+F+1}),e.jsx("div",{className:"pic",children:e.jsx("div",{className:"profile-pic",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,className:"h-full w-full",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:`M5.121 17.804A9.969 9.969 0 \r
                         0112 15c2.387 0 4.58.834 6.364 \r
                         2.197M15 7a3 3 0 11-6 \r
                         0 3 3 0 016 0z`})})})}),e.jsxs("div",{className:"info",children:[e.jsx("div",{className:"name",children:k.name}),e.jsx("div",{className:"rating",children:Math.round(k.rating||0)})]})]},k.id||F)),e.jsxs("div",{className:"pagination-row",children:[R>0&&e.jsx("button",{className:"pagination-button",onClick:()=>t(h,x-1),children:"Previous 10"}),R+T<E.length&&e.jsx("button",{className:"pagination-button",onClick:()=>t(h,x+1),children:"Next 10"})]})]})]}),e.jsx(Y,{isOpen:i,onClose:l,title:`${(g==null?void 0:g.name)||"Bartender"}'s Competition History`,maxWidth:"max-w-4xl",children:g&&e.jsx(me,{bartenderId:g.id,bartenderName:g.name})})]})}const V=A("BartenderSelect"),X=({value:m,onSelect:b,placeholder:h="Select a bartender",initialLabel:w="",excludeIds:x=[]})=>{const[s,t]=o.useState(w),[d,v]=o.useState(!1),[y,r]=o.useState([]),[a,n]=o.useState(!1),[p,_]=o.useState(null);o.useEffect(()=>{if(!s.trim()){r([]);return}const g=setTimeout(async()=>{n(!0);try{let N=S.from("bartenders").select("id, full_name, is_approved").ilike("full_name",`%${s}%`).is("is_archived",!1);x.length>0&&(N=N.not("id","in",`(${x.join(",")})`));const{data:E,error:T}=await N.limit(5);if(T)throw T;r(E||[])}catch(N){V.error("Failed to load bartenders:",N),_("Failed to load bartenders")}finally{n(!1)}},300);return()=>clearTimeout(g)},[s,x.join(",")]);const c=u=>{t(u.full_name),v(!1),b(u)},i=async()=>{try{const{data:{user:u}}=await S.auth.getUser();if(!u)throw new Error("Please sign in to add a new bartender");const{data:g,error:N}=await S.from("bartenders").insert({full_name:s.trim(),bar:"",rating:1500,rating_rd:350,rating_volatility:.06,is_profile_claimed:!1,is_approved:!1}).select().single();if(N)throw N;V.info("Created new bartender:",{id:g.id,name:g.full_name}),alert("New bartender created! Note: Bartenders need to be approved by an administrator before appearing on leaderboards."),t(g.full_name),v(!1),b(g)}catch(u){V.error("Error adding new bartender:",u),_(u.message)}};return e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:s,onChange:u=>{t(u.target.value),v(!0)},onClick:()=>v(!0),placeholder:h,className:"w-full p-2 bg-zinc-700 text-white rounded border border-gray-600"}),d&&(s.trim()||a||p)&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-zinc-800 rounded-md border border-gray-700 shadow-lg",children:[a&&e.jsx("div",{className:"p-2 text-gray-300 text-center",children:"Loading..."}),p&&e.jsx("div",{className:"p-2 text-red-400",children:p}),!a&&!p&&y.length>0&&e.jsxs("div",{children:[y.map(u=>e.jsx("div",{className:"p-2 hover:bg-zinc-700 cursor-pointer text-white",onClick:()=>c(u),children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:u.full_name}),u.is_approved===!1&&e.jsx("span",{className:"text-xs text-yellow-400 px-2 py-1 bg-zinc-800 rounded",children:"Pending"})]})},u.id)),e.jsx("div",{className:"border-t border-gray-700 mt-2"})]}),s.trim()&&e.jsxs("div",{className:"p-2 hover:bg-zinc-700 cursor-pointer text-white flex justify-between items-center",onClick:i,children:[e.jsxs("span",{children:['+ Add "',s.trim(),'" as new bartender']}),e.jsx("span",{className:"text-gray-400",children:"→"})]}),!a&&!p&&s.trim()&&y.length===0&&!p&&e.jsx("div",{className:"p-2 text-gray-300 text-center",children:"No matching bartenders found"})]})]})},$=A("ClaimForm"),ue=({onSuccess:m,onError:b})=>{const[h,w]=o.useState(null),[x,s]=o.useState(!1),[t,d]=o.useState(null),[v,y]=o.useState(!1),[r,a]=o.useState(null);o.useEffect(()=>{n()},[]);const n=async()=>{try{s(!0);const{data:{user:c}}=await S.auth.getUser();if(!c)return;const{data:i,error:u}=await S.from("submissions").select("id, status, content").eq("user_id",c.id).eq("status","pending").like("content",'%"type":"profile_claim"%').maybeSingle();if(u&&u.code!=="PGRST116")throw u;if(i){$.info("Found existing pending claim",{submissionId:i.id}),d(i);return}const{data:g,error:N}=await S.from("bartenders").select("id, is_profile_claimed").eq("user_id",c.id).single();if(N&&N.code!=="PGRST116")throw N;g!=null&&g.is_profile_claimed&&($.info("User already has a claimed profile",{bartenderId:g.id}),m==null||m({alreadyClaimed:!0}))}catch(c){$.error("Error checking existing claim:",c),a(c.message),b==null||b(c.message)}finally{s(!1)}},p=async c=>{c.preventDefault(),s(!0),a(null),y(!1);try{const{data:{user:i}}=await S.auth.getUser();if(!i)throw new Error("Authentication required");if(!h)throw new Error("Please select a bartender profile");const{data:u,error:g}=await S.from("bartenders").select("is_profile_claimed, users_attempting_to_claim").eq("id",h.id).single();if(g)throw g;if(u!=null&&u.is_profile_claimed)throw new Error("This profile has already been claimed");const N=u.users_attempting_to_claim||[];if(!N.includes(i.id)){const{error:T}=await S.from("bartenders").update({users_attempting_to_claim:[...N,i.id]}).eq("id",h.id);if(T)throw T}const{error:E}=await S.from("submissions").insert({user_id:i.id,content:JSON.stringify({type:"profile_claim",bartender_id:h.id,bartender_name:h.full_name,submitted_at:new Date().toISOString()}),status:"pending"});if(E)throw E;y(!0),$.info("Profile claim submitted successfully",{userId:i.id,bartenderId:h.id}),setTimeout(()=>{m==null||m()},2e3)}catch(i){a(i.message),b==null||b(i.message),$.error("Error submitting profile claim:",i)}finally{s(!1)}},_=async()=>{if(t){s(!0);try{const{data:{user:c}}=await S.auth.getUser();if(!c)throw new Error("Authentication required");let i=null;try{i=JSON.parse(t.content).bartender_id}catch(g){$.error("Error parsing claim content:",g)}if(i){const{data:g}=await S.from("bartenders").select("users_attempting_to_claim").eq("id",i).single();if(g){const N=(g.users_attempting_to_claim||[]).filter(E=>E!==c.id);await S.from("bartenders").update({users_attempting_to_claim:N}).eq("id",i)}}const{error:u}=await S.from("submissions").update({status:"cancelled"}).eq("id",t.id);if(u)throw u;d(null),m==null||m({cancelled:!0}),$.info("Claim cancelled successfully",{submissionId:t.id})}catch(c){a(c.message),b==null||b(c.message),$.error("Error cancelling claim:",c)}finally{s(!1)}}};return t?e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl text-white mb-4",children:"Pending Profile Claim"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Your profile claim is currently under review by an administrator."}),e.jsx("button",{onClick:_,disabled:x,className:"w-full py-2 bg-white text-black font-bold rounded hover:bg-zinc-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Processing...":"Cancel Claim"})]}):e.jsxs("form",{onSubmit:p,className:"p-6",method:"POST",children:[e.jsx("h3",{className:"text-xl text-white mb-6",children:"Claim Your Profile"}),r&&e.jsx("div",{className:"error-message mb-4 p-3 bg-red-500/20 border border-red-500 rounded text-red-200",children:r}),v&&e.jsx("div",{className:"success-message mb-4 p-3 bg-green-500/20 border border-green-500 rounded text-green-200",children:"Profile claim submitted successfully! Your claim will be reviewed by an administrator."}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-white mb-2",children:"Select Your Profile"}),e.jsx(X,{onSelect:w,placeholder:"Search for your profile",unclaimedOnly:!0})]}),e.jsx("button",{type:"submit",disabled:x||!h||v,className:"w-full py-3 bg-white text-black font-bold rounded hover:bg-zinc-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Submitting...":"Submit Claim"})]})},ge=({onSelect:m,placeholder:b="Search for competition"})=>{const[h,w]=o.useState(""),[x,s]=o.useState(!1),[t,d]=o.useState([]),[v,y]=o.useState(!1),[r,a]=o.useState(null);o.useEffect(()=>{if(!h.trim()){d([]);return}const _=setTimeout(async()=>{y(!0);try{const{data:c,error:i}=await S.from("legacy_competitions").select("id, name, date, venue").ilike("name",`%${h}%`).order("date",{ascending:!1}).limit(5);if(i)throw i;d(c||[])}catch(c){console.error("Error fetching competitions:",c),a("Failed to load competitions")}finally{y(!1)}},300);return()=>clearTimeout(_)},[h]);const n=()=>{m({name:h.trim(),isNew:!0}),w(h.trim()),s(!1)};return e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:h,onChange:p=>{w(p.target.value),s(!0)},onClick:()=>s(!0),placeholder:b,className:"w-full p-2 bg-zinc-700 text-white rounded border border-gray-600"}),x&&h.trim()&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-zinc-800 rounded-md border border-gray-700 shadow-lg max-h-60 overflow-y-auto",children:[v&&e.jsx("div",{className:"p-2 text-gray-300 text-center",children:"Loading..."}),r&&e.jsx("div",{className:"p-2 text-red-400",children:r}),!v&&!r&&t.length>0&&e.jsxs("div",{children:[t.map(p=>e.jsxs("div",{className:"p-2 hover:bg-zinc-700 cursor-pointer text-white",onClick:()=>{m(p),w(p.name),s(!1)},children:[e.jsx("div",{children:p.name}),e.jsxs("div",{className:"text-gray-400 text-sm",children:[new Date(p.date).toLocaleDateString()," - ",p.venue]}),e.jsx("hr",{className:"border-t border-gray-700 mt-2"})]},p.id)),e.jsx("div",{className:"border-t border-gray-700 mt-2"})]}),e.jsxs("div",{className:"p-2 hover:bg-zinc-700 cursor-pointer text-white flex justify-between items-center",onClick:n,children:[e.jsxs("span",{children:['+ Add "',h.trim(),'" as new competition']}),e.jsx("span",{className:"text-gray-400",children:"→"})]})]})]})},W=A("VenueSelect"),he=({value:m,onSelect:b,placeholder:h="Select a venue",initialLabel:w=""})=>{const[x,s]=o.useState(w),[t,d]=o.useState(!1),[v,y]=o.useState([]),[r,a]=o.useState(!1),[n,p]=o.useState(null);o.useEffect(()=>{if(!x.trim()){y([]);return}const u=setTimeout(async()=>{a(!0);try{const{data:g,error:N}=await S.from("venues").select("id, name, city, country").ilike("name",`%${x}%`).is("is_archived",!1).order("name").limit(5);if(N)throw N;y(g||[])}catch(g){W.error("Failed to load venues:",g),p("Failed to load venues")}finally{a(!1)}},300);return()=>clearTimeout(u)},[x]);const _=i=>{s(i.name),d(!1),b(i)},c=async()=>{try{const{data:{user:i}}=await S.auth.getUser();if(!i)throw new Error("Please sign in to add a new venue");const{data:u,error:g}=await S.from("venues").insert({name:x.trim(),created_by:i.id}).select().single();if(g)throw g;W.info("Created new venue:",{id:u.id,name:u.name}),s(u.name),d(!1),b(u)}catch(i){W.error("Error adding new venue:",i),p(i.message)}};return e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:x,onChange:i=>{s(i.target.value),d(!0)},onClick:()=>d(!0),placeholder:h,className:"w-full p-2 bg-zinc-700 text-white rounded border border-gray-600"}),t&&(x.trim()||r||n)&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-zinc-800 rounded-md border border-gray-700 shadow-lg",children:[r&&e.jsx("div",{className:"p-2 text-gray-300 text-center",children:"Loading..."}),n&&e.jsx("div",{className:"p-2 text-red-400",children:n}),!r&&!n&&v.length>0&&e.jsxs("div",{children:[v.map(i=>e.jsxs("div",{className:"p-2 hover:bg-zinc-700 cursor-pointer text-white",onClick:()=>_(i),children:[e.jsx("div",{children:i.name}),i.city&&i.country&&e.jsxs("div",{className:"text-gray-400 text-sm",children:[i.city,", ",i.country]})]},i.id)),e.jsx("div",{className:"border-t border-gray-700 mt-2"})]}),x.trim()&&e.jsxs("div",{className:"p-2 hover:bg-zinc-700 cursor-pointer text-white flex justify-between items-center",onClick:c,children:[e.jsxs("span",{children:['+ Add "',x.trim(),'" as new venue']}),e.jsx("span",{className:"text-gray-400",children:"→"})]}),!r&&!n&&x.trim()&&v.length===0&&!n&&e.jsx("div",{className:"p-2 text-gray-300 text-center",children:"No matching venues found"})]})]})},xe=[{id:"state final",label:"State Final"},{id:"national final",label:"National Final"},{id:"global final",label:"Global Final"}],pe=({onSuccess:m,onError:b})=>{const[h,w]=o.useState(!1),[x,s]=o.useState(""),[t,d]=o.useState([{id:"",position:""}]),[v,y]=o.useState(!1),[r,a]=o.useState({date:"",venue_id:"",venue_name:"",organizer_id:"",organizer_name:"",source_url:"",category:"legacy",country:"",round:"state final"}),[n,p]=o.useState(null),[_,c]=o.useState(!1),i=()=>{const{organizer_name:l,date:j,round:P,country:z}=r,f=(n==null?void 0:n.name)||"";if(!j||!l||!f||!P)return null;const C=new Date(j).getFullYear();return`${l} ${f} ${C} ${P} ${z||""}`.trim()},u=l=>{p(l),y(!(l!=null&&l.id)),l!=null&&l.id&&a(j=>({...j,date:l.date,venue_id:l.venue_id,venue_name:l.venue,organizer_id:l.organizer,category:l.category||"legacy",country:l.country||""}))},g=async l=>{try{const{data:j}=await S.from("organisers").select("organisation_name").eq("id",l.id).single();a(P=>({...P,organizer_id:l.id,organizer_name:(j==null?void 0:j.organisation_name)||""}))}catch(j){console.error("Error fetching organizer details:",j),s("Error fetching organizer details")}},N=l=>{a(j=>({...j,venue_id:l.id,venue_name:l.name}))},E=l=>({1:25,2:15,3:15,4:12,5:10,6:8,7:6,8:4,9:2,10:1})[l]||0,T=async l=>{l.preventDefault(),w(!0),s(""),c(!1);try{const{data:{user:j},error:P}=await S.auth.getUser();if(P)throw new Error("Authentication error");if(!j)throw new Error("Please sign in to submit results");if(v){if(!r.date)throw new Error("Date is required");if(!r.organizer_id)throw new Error("Organizer is required");if(!r.venue_id)throw new Error("Venue is required");if(!(n!=null&&n.name))throw new Error("Competition name is required");if(!r.round)throw new Error("Competition round is required")}let z;if(n!=null&&n.id)z=n.id;else{const C=i();if(!C)throw new Error("Unable to generate competition name - missing required fields");const{data:L,error:k}=await S.from("legacy_competitions").insert({name:C,date:r.date,venue:r.venue_name,venue_id:r.venue_id,organizer:r.organizer_id,category:r.category,country:r.country||null,created_by:j.id,status:"pending"}).select().single();if(k)throw k;z=L.id}const f=t.filter(C=>C.id&&C.position);if(f.length===0)throw new Error("At least one competitor with position is required");for(const C of f){const{error:L}=await S.from("legacy_results").insert({legacy_competition_id:z,bartender_id:C.id,placement:parseInt(C.position,10),points:E(parseInt(C.position,10)),status:"pending",created_by:j.id,competition_category:r.category});if(L)throw L}if(r.source_url){const{error:C}=await S.from("sources").insert({legacy_competition_id:z,url:r.source_url,created_by:j.id});if(C)throw C}c(!0),setTimeout(()=>{R(),m==null||m()},2e3)}catch(j){console.error("Submission error:",j),s(j.message),b==null||b(j.message)}finally{w(!1)}},R=()=>{a({date:"",venue_id:"",venue_name:"",organizer_id:"",organizer_name:"",source_url:"",category:"legacy",country:"",round:"state final"}),p(null),d([{id:"",position:""}]),y(!1),c(!1)},B=()=>{d(l=>[...l,{id:"",position:""}])},O=l=>{d(j=>j.filter((P,z)=>z!==l))};return e.jsxs("div",{className:"p-6 bg-zinc-800 rounded-lg",children:[e.jsx("h3",{className:"text-xl text-white mb-6",children:"Submit Competition Result"}),x&&e.jsx("div",{className:"error-message mb-4 p-3 bg-red-500/20 border border-red-500 rounded text-red-200",children:x}),_&&e.jsx("div",{className:"success-message mb-4 p-3 bg-green-500/20 border border-green-500 rounded text-green-200",children:"Competition result submitted successfully! Your submission will be reviewed by an administrator."}),e.jsxs("form",{onSubmit:T,className:"space-y-6",method:"POST",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-white mb-2",children:"Competition *"}),e.jsx(ge,{onSelect:u,placeholder:"Search or add competition"})]}),v&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-white mb-2",children:"Organizer *"}),e.jsx(se,{onSelect:g,placeholder:"Select organizer"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-white mb-2",children:"Venue *"}),e.jsx(he,{onSelect:N,placeholder:"Select or add venue"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-white mb-2",children:"Round *"}),e.jsx("select",{value:r.round,onChange:l=>a({...r,round:l.target.value}),className:"w-full p-2 bg-zinc-700 text-white rounded border border-gray-600",required:!0,children:xe.map(l=>e.jsx("option",{value:l.id,children:l.label},l.id))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-white mb-2",children:"Category *"}),e.jsxs("select",{value:r.category,onChange:l=>a({...r,category:l.target.value}),className:"w-full p-2 bg-zinc-700 text-white rounded border border-gray-600",required:!0,children:[e.jsx("option",{value:"legacy",children:"Legacy Competition"}),e.jsx("option",{value:"speed",children:"Speed"}),e.jsx("option",{value:"flair",children:"Flair"}),e.jsx("option",{value:"traditional",children:"Traditional"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-white mb-2",children:"Country"}),e.jsxs("select",{value:r.country,onChange:l=>a({...r,country:l.target.value}),className:"w-full p-2 bg-zinc-700 text-white rounded border border-gray-600",children:[e.jsx("option",{value:"",children:"Select country"}),ie.map(l=>e.jsx("option",{value:l,children:l},l))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-white mb-2",children:"Date *"}),e.jsx("input",{type:"date",value:r.date,onChange:l=>a({...r,date:l.target.value}),className:"w-full p-2 bg-zinc-700 text-white rounded border border-gray-600",required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-white mb-2",children:"Source URL *"}),e.jsx("input",{type:"url",value:r.source_url,onChange:l=>a({...r,source_url:l.target.value}),className:"w-full p-2 bg-zinc-700 text-white rounded border border-gray-600",required:!0,placeholder:"Link to competition results"})]}),e.jsxs("div",{className:"competitors-section mt-8",children:[e.jsx("h3",{className:"text-lg text-white mb-4",children:"Competitors *"}),t.map((l,j)=>e.jsxs("div",{className:"competitor-entry mb-4 p-4 bg-zinc-700 rounded",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-white mb-2",children:"Competitor Name *"}),e.jsx(X,{onSelect:P=>{const z=[...t];z[j].id=P.id,d(z)},placeholder:"Search for competitor"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-white mb-2",children:"Position *"}),e.jsx("input",{type:"number",value:l.position,onChange:P=>{const z=[...t];z[j].position=P.target.value,d(z)},className:"w-full p-2 bg-zinc-600 text-white rounded border border-gray-500",required:!0,min:"1"})]}),j>0&&e.jsx("button",{type:"button",onClick:()=>O(j),className:"text-red-400 hover:text-red-300 px-4 py-2 border border-red-500 rounded hover:bg-red-500/20 transition-colors",children:"Remove Competitor"})]},j)),e.jsx("button",{type:"button",onClick:B,className:"w-full p-2 border border-gray-400 text-gray-300 rounded hover:bg-zinc-700 transition-colors",children:"Add Competitor"})]}),e.jsx("button",{type:"submit",disabled:h,className:"w-full p-3 bg-white text-black font-bold rounded hover:bg-zinc-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Submitting...":"Submit Result"})]})]})},D=Z("UpcomingCompetitions"),Q=()=>{const[m,b]=o.useState([]),[h,w]=o.useState(!0),[x,s]=o.useState(null),{isAuthenticated:t}=J(),[d,v]=o.useState(!1);o.useEffect(()=>{const a=()=>{v(window.innerWidth<=768)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),o.useEffect(()=>{(async()=>{w(!0),s(null),D.info("Fetching upcoming competitions data...");try{const n=new Date().toISOString().split("T")[0],{data:p,error:_}=await K.from("legacy_competitions").select("id, name, date, venue, country, category, status, more_info_link").gte("date",n).order("date",{ascending:!0}).limit(3);if(_)throw D.error("Error fetching upcoming competitions:",_),new Error(`Failed to fetch upcoming competitions: ${_.message}`);b(p||[]),D.debug(`Fetched ${(p==null?void 0:p.length)||0} upcoming competitions.`)}catch(n){D.error("Error in fetchCompetitions:",n),s(n.message)}finally{w(!1)}})()},[]);const y=a=>{let n="category-badge",p=a||"Legacy";switch(a==null?void 0:a.toLowerCase()){case"speed":n+=" bg-red-500 text-white",p="Speed";break;case"flair":n+=" bg-green-500 text-black",p="Flair";break;case"traditional":n+=" bg-blue-500 text-white",p="Traditional";break;default:n+=" bg-zinc-500 text-white";break}return e.jsx("span",{className:`${n} inline-block px-2 py-1 rounded text-xs font-medium`,children:p})},r=a=>e.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg shadow-md h-full flex flex-col",children:[e.jsx("div",{className:"event-date text-sm text-gray-400 mb-1",children:new Date(a.date).toLocaleDateString()}),e.jsx("h3",{className:"event-name text-white font-medium text-lg mb-2",children:a.name}),e.jsx("div",{className:"event-category mb-2",children:y(a.category)}),e.jsx("div",{className:"event-venue text-gray-300 mb-4",children:a.venue}),e.jsx("div",{className:"mt-auto pt-4 border-t border-zinc-700",children:e.jsx("a",{href:"https://airtable.com/appMQggH3bB7G8pRV/pagGsPtPvflViR9PC/form",target:"_blank",rel:"noopener noreferrer",className:`block w-full py-2 text-center rounded ${t?"bg-white text-black hover:bg-zinc-200":"bg-zinc-600 text-gray-300 cursor-not-allowed"}`,onClick:n=>!t&&n.preventDefault(),title:t?"Register for event":"Sign in to register",children:t?"Register":"Sign in to Register"})})]});return m.length===0&&!h?null:h?e.jsxs("div",{className:"upcoming-competitions mt-8 mb-4",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Upcoming Events"}),e.jsx("div",{className:"animate-pulse flex space-x-4",children:e.jsxs("div",{className:"flex-1 space-y-4 py-1",children:[e.jsx("div",{className:"h-12 bg-zinc-700 rounded"}),e.jsx("div",{className:"h-12 bg-zinc-700 rounded"})]})})]}):x?e.jsxs("div",{className:"upcoming-competitions mt-8 mb-4",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Upcoming Events"}),e.jsx("div",{className:"bg-red-900/20 border border-red-500 text-red-200 p-4 rounded-lg",children:"Error loading upcoming events."})]}):e.jsxs("div",{className:"upcoming-competitions mt-8 mb-4",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Upcoming Events"}),d&&e.jsx("div",{className:"md:hidden",children:e.jsx(ne,{events:m,renderEventCard:r,emptyMessage:"No upcoming events scheduled yet."})}),!d&&e.jsx("div",{className:"hidden md:block bg-zinc-800 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-700",children:[e.jsx("thead",{className:"bg-zinc-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Event"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Category"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Location"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Register"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:m.map(a=>e.jsxs("tr",{className:"hover:bg-zinc-750",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-white",children:new Date(a.date).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3 text-sm text-white",children:a.name}),e.jsx("td",{className:"px-4 py-3 text-sm",children:y(a.category)}),e.jsx("td",{className:"px-4 py-3 text-sm text-white",children:a.venue}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("a",{href:"https://airtable.com/appMQggH3bB7G8pRV/pagGsPtPvflViR9PC/form",target:"_blank",rel:"noopener noreferrer",className:`px-3 py-1 rounded ${t?"bg-white text-black hover:bg-zinc-200":"bg-zinc-600 text-gray-300 cursor-not-allowed"}`,onClick:n=>!t&&n.preventDefault(),title:t?"Register for event":"Sign in to register",children:t?"Register":"Sign in to Register"})})]},a.id))})]})})]})},M=Z("HomePage"),we=()=>{var z;const[m,b]=o.useState({legacy:[],traditional:[],flair:[],speed:[]}),[h,w]=o.useState(!0),[x,s]=o.useState(null),{user:t,isAuthenticated:d,profile:v,loading:y}=J(),[r,a]=o.useState(!1),[n,p]=o.useState({legacy:{page:0,filter:"rating"},speed:{page:0,filter:"rating"},traditional:{page:0,filter:"rating"},flair:{page:0,filter:"rating"}}),[_,c]=o.useState(!1),[i,u]=o.useState(!1),g=re(),N=ae(),E=(z=g.state)==null?void 0:z.scrollTo;o.useEffect(()=>{(async()=>{if(!d||!t){a(!1);return}try{const{data:C,error:L}=await K.from("submissions").select("id, status").eq("user_id",t.id).eq("status","pending").like("content",'%"type":"profile_claim"%').maybeSingle();if(L)throw L;a(!!C),M.debug("Pending claim check result:",{hasPendingClaim:!!C})}catch(C){M.error("Error checking pending claims:",C)}})()},[d,t]);const T=o.useCallback(async()=>{w(!0),s(null),M.info("Fetching leaderboard data...");try{const f=await le.fetchLeaderboardData();b({legacy:(f==null?void 0:f.legacy)||[],traditional:(f==null?void 0:f.traditional)||[],flair:(f==null?void 0:f.flair)||[],speed:(f==null?void 0:f.speed)||[]}),M.info("Leaderboard data fetched successfully")}catch(f){M.error("Error fetching leaderboard data:",f),s("Failed to load leaderboard data. Please try again later."),b({legacy:[],traditional:[],flair:[],speed:[]})}finally{w(!1)}},[]);o.useEffect(()=>{T()},[T]),o.useEffect(()=>{if(E){M.debug(`Scrolling to section: ${E}`);const f=document.getElementById(`${E}-section`),C=document.querySelector(".column-right");if(f&&C){const L=f.offsetTop,k=parseFloat(getComputedStyle(C).paddingTop||"0"),F=L-k;M.debug(`Target offsetTop: ${L}, Container padding: ${k}, Effective scroll: ${F}`);const q=setTimeout(()=>{C.scrollTo({top:F,behavior:"smooth"}),N(g.pathname,{replace:!0,state:{...g.state,scrollTo:null}})},150);return()=>clearTimeout(q)}else M.warn(`Scroll target #${E}-section or .column-right not found`),N(g.pathname,{replace:!0,state:{...g.state,scrollTo:null}})}},[E,g.pathname,g.state,N]);const R=(f,C)=>{p(F=>({...F,[f]:{...F[f],page:C}}));const L=document.getElementById(`${f}-section`),k=document.querySelector(".column-right");if(L&&k){const F=L.offsetTop,q=parseFloat(getComputedStyle(k).paddingTop||"0"),ee=F-q;k.scrollTo({top:ee,behavior:"smooth"})}},B=(f,C)=>{p(L=>({...L,[f]:{...L[f],filter:C,page:0}}))},O=()=>{if(!d){H("Please sign in or create an account to claim a profile."),N("/enter",{state:{from:g}});return}c(!0),M.info("Claim Profile modal opened")},l=()=>{if(!d){H("Please sign in or create an account to submit results."),N("/enter",{state:{from:g}});return}u(!0),M.info("Submit Result modal opened")},P=!(d&&(v==null?void 0:v.is_profile_claimed)===!0)&&!r;return h||y?e.jsxs("div",{className:"flex justify-center items-center h-screen col-span-2",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-white rounded-full border-t-transparent"}),e.jsx("span",{className:"ml-4 text-gray-300",children:"Loading Leaderboards..."})]}):x?e.jsx("div",{className:"text-center p-10 text-red-400 col-span-2",children:x}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"column-left hidden md:flex",children:[" ",e.jsxs("div",{className:"column-left-content text-white p-8",children:[" ",e.jsx("div",{style:{height:"calc(100vh * 4 / 13)",minHeight:"200px",flexShrink:0}}),d&&v?e.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Welcome, ",v.full_name||"Competitor","!"]}):e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"PROFESSIONAL BARTENDING. A NEW GLOBAL SPORT."}),e.jsx("p",{className:"mb-4 text-gray-300",children:"Our goal is to transform one of the worlds oldest professions into a thrilling, worldwide competition by uniting bartenders, bars, and brands under one transparent ranking system."}),e.jsx("p",{className:"mb-4 text-gray-300",children:"These leaderboards rank bartenders with registered competition results. Legacy competitions are events held by brand organisers - the ones most bartenders are familiar with. MBC Speed, Traditional and Flair and MBC sanctioned events that adhere to guidelines of fairness, transparency and integrity."}),e.jsx("p",{className:"mb-4 text-gray-300",children:"To add yourself to the leaderboard, click 'submit result'."}),e.jsx("p",{className:"mb-4 text-gray-300",children:"To find out more about our pillars and goals, click the about section of our site menu."}),e.jsx(Q,{}),e.jsxs("p",{className:"text-gray-400 text-sm mt-8",children:["This service is created and maintained by passionate bartenders out of ",e.jsx("a",{href:"http://www.trapadl.com",className:"text-white hover:text-gray-300",target:"_blank",rel:"noopener noreferrer",children:"trap. cocktail bar"})," in Adelaide, Australia. It's constantly undergoing improvements. Feedback, bug reports, or contribution inquiries are welcome via ",e.jsx("a",{href:"mailto:cocktails+mbc@trapadl.com",className:"text-white hover:text-gray-300",children:"cocktails+mbc@trapadl.com"}),"."]})]})]}),e.jsxs("div",{className:"block md:hidden p-4 text-white",children:[e.jsx("div",{style:{minHeight:"200px",flexShrink:0}}),d&&v?e.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Welcome, ",v.full_name||"Competitor","!"]}):e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"PROFESSIONAL BARTENDING. A NEW GLOBAL SPORT."}),e.jsx("p",{className:"mb-4 text-gray-300",children:"Our goal is to transform one of the worlds oldest professions into a thrilling, worldwide competition by uniting bartenders, bars, and brands under one transparent ranking system."}),e.jsx("p",{className:"mb-4 text-gray-300",children:"These leaderboards rank bartenders with registered competition results. Legacy competitions are events held by brand organisers - the ones most bartenders are familiar with. MBC Speed, Traditional and Flair and MBC sanctioned events that adhere to guidelines of fairness, transparency and integrity."}),e.jsx("p",{className:"mb-4 text-gray-300",children:"To add yourself to the leaderboard, click 'submit result'."}),e.jsx("p",{className:"mb-4 text-gray-300",children:"To find out more about our pillars and goals, click the about section of our site menu."}),e.jsx(Q,{}),e.jsxs("p",{className:"text-gray-400 text-sm mt-8",children:["This service is created and maintained by passionate bartenders out of ",e.jsx("a",{href:"http://www.trapadl.com",className:"text-white hover:text-gray-300",target:"_blank",rel:"noopener noreferrer",children:"trap. cocktail bar"})," in Adelaide, Australia. It's constantly undergoing improvements. Feedback, bug reports, or contribution inquiries are welcome via ",e.jsx("a",{href:"mailto:cocktails+mbc@trapadl.com",className:"text-white hover:text-gray-300",children:"cocktails+mbc@trapadl.com"}),"."]})]}),e.jsxs("div",{className:"column-right w-full md:w-1/2",children:[" ",e.jsxs("div",{className:"column-right-content space-y-12 p-4 md:p-8 ",children:[" ",e.jsx(I,{id:"legacy-section",title:"Legacy Leaderboard",type:"legacy",data:m.legacy,page:n.legacy.page,filter:n.legacy.filter,onPageChange:R,onFilterChange:B,showFilters:!1,showClaimButton:P,hasPendingClaim:r,onClaimProfileClick:O,onSubmitResultClick:l}),e.jsx(I,{id:"speed-section",title:"MBC Speed Leaderboard",type:"speed",data:m.speed,page:n.speed.page,filter:n.speed.filter,onPageChange:R,onFilterChange:B}),e.jsx(I,{id:"traditional-section",title:"MBC Traditional Leaderboard",type:"traditional",data:m.traditional,page:n.traditional.page,filter:n.traditional.filter,onPageChange:R,onFilterChange:B,comingSoon:!0}),e.jsx(I,{id:"flair-section",title:"MBC Flair Leaderboard",type:"flair",data:m.flair,page:n.flair.page,filter:n.flair.filter,onPageChange:R,onFilterChange:B,comingSoon:!0})]})]}),e.jsx(Y,{isOpen:_,onClose:()=>c(!1),title:"Claim Your Profile",children:e.jsx(ue,{onSuccess:()=>{M.info("Claim success callback triggered."),c(!1),a(!0),T()},onError:f=>M.error("Claim form error:",f)})}),e.jsx(Y,{isOpen:i,onClose:()=>u(!1),title:"Submit Competition Result",maxWidth:"max-w-2xl",children:e.jsx(pe,{onSuccess:()=>{M.info("Result success callback triggered."),u(!1),H("Result submitted for admin review!")},onError:f=>M.error("Result form error:",f)})}),e.jsx("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 md:hidden z-50",children:e.jsx("button",{onClick:()=>{const f=document.querySelector(".column-right");f&&f.scrollIntoView({behavior:"smooth"})},className:"bg-black text-white px-6 py-3 rounded-full shadow-lg hover:bg-zinc-800 transition",children:"↓ Leaderboards ↓"})})]})};export{we as default};
