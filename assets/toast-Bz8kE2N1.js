import{r as d,j as a,s as h}from"./main-vUWWkE0C.js";const C=["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burundi","Côte d'Ivoire","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo","Costa Rica","Croatia","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Holy See","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Korea","North Macedonia","Norway","Oman","Pakistan","Palau","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Korea","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syria","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"],N=({onSelect:e,placeholder:s="Select an organizer"})=>{const[r,c]=d.useState(""),[i,m]=d.useState(!1),[p,f]=d.useState([]),[w,S]=d.useState(!1),[g,y]=d.useState(null);d.useEffect(()=>{if(!r.trim()){f([]);return}const o=setTimeout(async()=>{S(!0);try{const{data:l,error:u}=await h.from("organisers").select("id, organisation_name").ilike("organisation_name",`%${r}%`).order("organisation_name").limit(5);if(u)throw u;f(l||[])}catch(l){console.error("Error fetching organizers:",l),y("Failed to load organizers")}finally{S(!1)}},300);return()=>clearTimeout(o)},[r]);const x=async()=>{var n;try{const{data:{user:o}}=await h.auth.getUser();if(!o)throw new Error("Please sign in to add a new organizer");const{data:l,error:u}=await h.from("organisers").insert({organisation_name:r.trim(),full_name:((n=o.user_metadata)==null?void 0:n.full_name)||"",brand:"",user_id:o.id}).select().single();if(u)throw u;e(l),c(l.organisation_name),m(!1)}catch(o){console.error("Error adding new organizer:",o),y(o.message)}};return a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:r,onChange:n=>{c(n.target.value),m(!0)},placeholder:s,className:"w-full p-2 bg-zinc-700 text-white rounded border border-gray-600"}),i&&r.trim()&&a.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-zinc-800 rounded-md border border-gray-700 shadow-lg",children:[w&&a.jsx("div",{className:"p-2 text-gray-300 text-center",children:"Loading..."}),g&&a.jsx("div",{className:"p-2 text-red-400",children:g}),!w&&!g&&p.length>0&&a.jsxs("div",{children:[p.map(n=>a.jsx("div",{className:"p-2 hover:bg-zinc-700 cursor-pointer text-white",onClick:()=>{e(n),c(n.organisation_name),m(!1)},children:a.jsx("div",{children:n.organisation_name})},n.id)),a.jsx("div",{className:"border-t border-gray-700 mt-2"})]}),a.jsxs("div",{className:"p-2 hover:bg-zinc-700 cursor-pointer text-white flex justify-between items-center",onClick:x,children:[a.jsxs("span",{children:['+ Add "',r.trim(),'" as new organizer']}),a.jsx("span",{className:"text-gray-400",children:"→"})]})]})]})};let t;function z(){return t||(t=document.createElement("div"),t.className="fixed top-4 right-4 z-50 flex flex-col gap-2",document.body.appendChild(t)),t}function b(e,s="info",r=3e3){const c=z(),i=document.createElement("div");return i.className=`
    px-4 py-2 rounded shadow-lg text-white
    ${s==="error"?"bg-red-600":""}
    ${s==="success"?"bg-green-600":""}
    ${s==="info"?"bg-black":""}
    ${s==="warning"?"bg-yellow-600":""}
  `,i.textContent=e,c.appendChild(i),setTimeout(()=>{i.parentElement&&i.parentElement.removeChild(i),t&&t.children.length===0&&(document.body.removeChild(t),t=null)},r),i}const E=e=>b(e,"success"),T=e=>b(e,"error"),M=e=>b(e,"info");export{N as O,E as a,T as b,C as c,M as s};
